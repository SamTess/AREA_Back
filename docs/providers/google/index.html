<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-providers/google" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Google Provider - Technical Documentation | AREA Backend Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://area-backend-docs.example.com/AREA_Back/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://area-backend-docs.example.com/AREA_Back/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://area-backend-docs.example.com/AREA_Back/docs/providers/google"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Google Provider - Technical Documentation | AREA Backend Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/AREA_Back/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://area-backend-docs.example.com/AREA_Back/docs/providers/google"><link data-rh="true" rel="alternate" href="https://area-backend-docs.example.com/AREA_Back/docs/providers/google" hreflang="en"><link data-rh="true" rel="alternate" href="https://area-backend-docs.example.com/AREA_Back/docs/providers/google" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Service Providers","item":"https://area-backend-docs.example.com/AREA_Back/docs/category/service-providers"},{"@type":"ListItem","position":2,"name":"Google Provider - Technical Documentation","item":"https://area-backend-docs.example.com/AREA_Back/docs/providers/google"}]}</script><link rel="stylesheet" href="/AREA_Back/assets/css/styles.8c1dd5bc.css">
<script src="/AREA_Back/assets/js/runtime~main.58b0ff14.js" defer="defer"></script>
<script src="/AREA_Back/assets/js/main.ee3d4977.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/AREA_Back/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/AREA_Back/"><div class="navbar__logo"><img src="/AREA_Back/img/logo.svg" alt="AREA Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/AREA_Back/img/logo.svg" alt="AREA Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AREA Backend</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/AREA_Back/docs/">Documentation</a><a class="navbar__item navbar__link" href="/AREA_Back/doxygen/html/index.html">API Reference (Doxygen)</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/SamTess/AREA_Back" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/AREA_Back/docs/"><span title="AREA Backend Documentation" class="linkLabel_WmDU">AREA Backend Documentation</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/AREA_Back/docs/category/guides"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/AREA_Back/docs/category/technical-documentation"><span title="Technical Documentation" class="categoryLinkLabel_W154">Technical Documentation</span></a><button aria-label="Expand sidebar category &#x27;Technical Documentation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/AREA_Back/docs/category/service-providers"><span title="Service Providers" class="categoryLinkLabel_W154">Service Providers</span></a><button aria-label="Collapse sidebar category &#x27;Service Providers&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AREA_Back/docs/providers/"><span title="OAuth Providers Documentation" class="linkLabel_WmDU">OAuth Providers Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AREA_Back/docs/providers/discord"><span title="Discord Provider - Technical Documentation" class="linkLabel_WmDU">Discord Provider - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AREA_Back/docs/providers/github"><span title="GitHub Provider - Technical Documentation" class="linkLabel_WmDU">GitHub Provider - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/AREA_Back/docs/providers/google"><span title="Google Provider - Technical Documentation" class="linkLabel_WmDU">Google Provider - Technical Documentation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AREA_Back/docs/providers/slack"><span title="Slack Provider - Technical Documentation" class="linkLabel_WmDU">Slack Provider - Technical Documentation</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/AREA_Back/docs/api-reference"><span title="API Reference" class="linkLabel_WmDU">API Reference</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/AREA_Back/docs/category/worker-system"><span title="Worker System" class="categoryLinkLabel_W154">Worker System</span></a><button aria-label="Expand sidebar category &#x27;Worker System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/AREA_Back/docs/how_to_contribute"><span title="How to Contribute to AREA Backend" class="linkLabel_WmDU">How to Contribute to AREA Backend</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/AREA_Back/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/AREA_Back/docs/category/service-providers"><span>Service Providers</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Google Provider - Technical Documentation</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Google Provider - Technical Documentation</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">​</a></h2>
<p>The Google provider enables OAuth2 authentication and integration with Google Workspace services within the AREA platform. It allows users to authenticate using their Google account and interact with Gmail, Google Calendar, Google Drive, and Google Sheets through automated actions and event triggers.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="core-components">Core Components<a href="#core-components" class="hash-link" aria-label="Direct link to Core Components" title="Direct link to Core Components" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-oauth-service-oauthgoogleservicejava">1. OAuth Service (<code>OAuthGoogleService.java</code>)<a href="#1-oauth-service-oauthgoogleservicejava" class="hash-link" aria-label="Direct link to 1-oauth-service-oauthgoogleservicejava" title="Direct link to 1-oauth-service-oauthgoogleservicejava" translate="no">​</a></h4>
<ul>
<li class=""><strong>Location</strong>: <code>src/main/java/area/server/AREA_Back/service/OAuthGoogleService.java</code></li>
<li class=""><strong>Extends</strong>: <code>OAuthService</code> (abstract base class)</li>
<li class=""><strong>Purpose</strong>: Handles Google OAuth2 authentication and token management</li>
</ul>
<p><strong>Key Features</strong>:</p>
<ul>
<li class="">OAuth2 authorization code flow</li>
<li class="">User authentication and registration</li>
<li class="">Account linking to existing users</li>
<li class="">Access token and refresh token management</li>
<li class="">Token encryption and storage</li>
<li class="">Token expiration tracking</li>
<li class="">Prometheus metrics integration</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-action-service-googleactionservicejava">2. Action Service (<code>GoogleActionService.java</code>)<a href="#2-action-service-googleactionservicejava" class="hash-link" aria-label="Direct link to 2-action-service-googleactionservicejava" title="Direct link to 2-action-service-googleactionservicejava" translate="no">​</a></h4>
<ul>
<li class=""><strong>Location</strong>: <code>src/main/java/area/server/AREA_Back/service/GoogleActionService.java</code></li>
<li class=""><strong>Purpose</strong>: Executes Google Workspace actions and monitors Google events</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-event-polling-service-googleeventpollingservicejava">3. Event Polling Service (<code>GoogleEventPollingService.java</code>)<a href="#3-event-polling-service-googleeventpollingservicejava" class="hash-link" aria-label="Direct link to 3-event-polling-service-googleeventpollingservicejava" title="Direct link to 3-event-polling-service-googleeventpollingservicejava" translate="no">​</a></h4>
<ul>
<li class=""><strong>Location</strong>: <code>src/main/java/area/server/AREA_Back/service/GoogleEventPollingService.java</code></li>
<li class=""><strong>Purpose</strong>: Polls Google services for new events at regular intervals</li>
<li class=""><strong>Scheduling</strong>: Runs every 10 seconds (<code>@Scheduled(fixedRate = 10000)</code>)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="oauth2-implementation">OAuth2 Implementation<a href="#oauth2-implementation" class="hash-link" aria-label="Direct link to OAuth2 Implementation" title="Direct link to OAuth2 Implementation" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" translate="no">​</a></h3>
<p>The Google provider requires the following environment variables:</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">spring.security.oauth2.client.registration.google.client-id=&lt;your-client-id&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.security.oauth2.client.registration.google.client-secret=&lt;your-client-secret&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_REDIRECT_BASE_URL=http://localhost:3000</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="oauth-scopes">OAuth Scopes<a href="#oauth-scopes" class="hash-link" aria-label="Direct link to OAuth Scopes" title="Direct link to OAuth Scopes" translate="no">​</a></h3>
<p>The provider requests comprehensive access to Google Workspace services:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">email</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/gmail.readonly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/gmail.send</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/gmail.modify</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/calendar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/calendar.events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/drive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/drive.file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">https://www.googleapis.com/auth/spreadsheets</span><br></span></code></pre></div></div>
<p><strong>Additional Parameters</strong>:</p>
<ul>
<li class=""><code>access_type=offline</code>: Requests refresh token for offline access</li>
<li class=""><code>prompt=consent</code>: Forces consent screen to ensure refresh token</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="oauth-flow">OAuth Flow<a href="#oauth-flow" class="hash-link" aria-label="Direct link to OAuth Flow" title="Direct link to OAuth Flow" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>Authorization Request</strong></p>
<ul>
<li class="">User initiates OAuth flow via <code>/api/oauth/google/authorize</code></li>
<li class="">Redirects to Google OAuth consent screen</li>
<li class="">Callback URL: <code>{OAUTH_REDIRECT_BASE_URL}/oauth-callback</code></li>
</ul>
</li>
<li class="">
<p><strong>Token Exchange</strong></p>
<ul>
<li class="">Authorization code is exchanged for access token and refresh token</li>
<li class="">Token endpoint: <code>https://oauth2.googleapis.com/token</code></li>
<li class="">Both tokens are encrypted before storage</li>
</ul>
</li>
<li class="">
<p><strong>User Profile Retrieval</strong></p>
<ul>
<li class="">Fetches user profile from <code>https://www.googleapis.com/oauth2/v2/userinfo</code></li>
<li class="">Extracts email, name, picture, locale, and verification status</li>
<li class="">Creates or updates user account</li>
</ul>
</li>
<li class="">
<p><strong>Session Creation</strong></p>
<ul>
<li class="">Generates JWT access and refresh tokens</li>
<li class="">Sets secure HTTP-only cookies</li>
<li class="">Stores encrypted Google access token and refresh token in database</li>
<li class="">Records token expiration time</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="token-management">Token Management<a href="#token-management" class="hash-link" aria-label="Direct link to Token Management" title="Direct link to Token Management" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="access-token">Access Token<a href="#access-token" class="hash-link" aria-label="Direct link to Access Token" title="Direct link to Access Token" translate="no">​</a></h4>
<ul>
<li class="">Encrypted and stored in <code>access_token_enc</code> field</li>
<li class="">Expires after specified duration (typically 3600 seconds)</li>
<li class="">Automatically refreshed using refresh token when needed</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="refresh-token">Refresh Token<a href="#refresh-token" class="hash-link" aria-label="Direct link to Refresh Token" title="Direct link to Refresh Token" translate="no">​</a></h4>
<ul>
<li class="">Encrypted and stored in <code>refresh_token_enc</code> field</li>
<li class="">Long-lived token for obtaining new access tokens</li>
<li class="">Only granted with <code>access_type=offline</code> and <code>prompt=consent</code></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="expiration-tracking">Expiration Tracking<a href="#expiration-tracking" class="hash-link" aria-label="Direct link to Expiration Tracking" title="Direct link to Expiration Tracking" translate="no">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calculateExpirationTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Integer</span><span class="token plain"> expiresIn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expiresIn </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">plusHours</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">LocalDateTime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">plusSeconds</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expiresIn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="account-linking">Account Linking<a href="#account-linking" class="hash-link" aria-label="Direct link to Account Linking" title="Direct link to Account Linking" translate="no">​</a></h3>
<p>The provider supports linking Google accounts to existing authenticated users:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">UserOAuthIdentity</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">linkToExistingUser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">User</span><span class="token plain"> existingUser</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> authorizationCode</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Endpoint</strong>: <code>/api/oauth-link/google/exchange</code></p>
<p><strong>Features</strong>:</p>
<ul>
<li class="">Links Google account to current session user</li>
<li class="">Validates email uniqueness</li>
<li class="">Prevents duplicate linking</li>
<li class="">Stores Google profile metadata (name, given_name, family_name, picture, locale, verified_email)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="implemented-services">Implemented Services<a href="#implemented-services" class="hash-link" aria-label="Direct link to Implemented Services" title="Direct link to Implemented Services" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="gmail-services">Gmail Services<a href="#gmail-services" class="hash-link" aria-label="Direct link to Gmail Services" title="Direct link to Gmail Services" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="actions">Actions<a href="#actions" class="hash-link" aria-label="Direct link to Actions" title="Direct link to Actions" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-send-email">1. Send Email<a href="#1-send-email" class="hash-link" aria-label="Direct link to 1. Send Email" title="Direct link to 1. Send Email" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>gmail_send_email</code></li>
<li class=""><strong>Description</strong>: Sends an email via Gmail</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>to</code> (required): Recipient email address</li>
<li class=""><code>subject</code> (required): Email subject</li>
<li class=""><code>body</code> (required): Email body (plain text)</li>
<li class=""><code>cc</code> (optional): CC recipients (comma-separated)</li>
<li class=""><code>bcc</code> (optional): BCC recipients (comma-separated)</li>
</ul>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;to&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;recipient@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;subject&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Meeting Reminder&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;body&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Don&#x27;t forget our meeting tomorrow at 10 AM.&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;cc&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;manager@example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Implementation</strong>: Encodes email in RFC 2822 format, Base64 URL-safe encoding</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-add-gmail-label">2. Add Gmail Label<a href="#2-add-gmail-label" class="hash-link" aria-label="Direct link to 2. Add Gmail Label" title="Direct link to 2. Add Gmail Label" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>gmail_add_label</code></li>
<li class=""><strong>Description</strong>: Adds a label to a Gmail message</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>message_id</code> (required): Gmail message ID</li>
<li class=""><code>label_id</code> (required): Gmail label ID</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="events">Events<a href="#events" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-new-email">1. New Email<a href="#1-new-email" class="hash-link" aria-label="Direct link to 1. New Email" title="Direct link to 1. New Email" translate="no">​</a></h5>
<ul>
<li class=""><strong>Event Key</strong>: <code>gmail_new_email</code></li>
<li class=""><strong>Description</strong>: Triggers when a new email is received</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>from</code> (optional): Filter by sender email</li>
<li class=""><code>subject_contains</code> (optional): Filter by subject keywords</li>
<li class=""><code>label_id</code> (optional): Filter by label</li>
</ul>
</li>
<li class=""><strong>Polling</strong>: Checks for emails received since last poll</li>
<li class=""><strong>Output</strong>:<!-- -->
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;message_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;18c1a2b3c4d5e6f7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;thread_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;18c1a2b3c4d5e6f7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;from&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sender@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;to&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;recipient@example.com&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;subject&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Important notification&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;snippet&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Email preview text...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;received_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-15T10:30:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;labels&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;INBOX&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;UNREAD&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="google-calendar-services">Google Calendar Services<a href="#google-calendar-services" class="hash-link" aria-label="Direct link to Google Calendar Services" title="Direct link to Google Calendar Services" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="actions-1">Actions<a href="#actions-1" class="hash-link" aria-label="Direct link to Actions" title="Direct link to Actions" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-create-event">1. Create Event<a href="#1-create-event" class="hash-link" aria-label="Direct link to 1. Create Event" title="Direct link to 1. Create Event" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>calendar_create_event</code></li>
<li class=""><strong>Description</strong>: Creates a new calendar event</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>calendar_id</code> (optional): Calendar ID (defaults to &quot;primary&quot;)</li>
<li class=""><code>summary</code> (required): Event title</li>
<li class=""><code>description</code> (optional): Event description</li>
<li class=""><code>start_time</code> (required): Start time (ISO 8601 format)</li>
<li class=""><code>end_time</code> (required): End time (ISO 8601 format)</li>
<li class=""><code>location</code> (optional): Event location</li>
<li class=""><code>attendees</code> (optional): Array of attendee emails</li>
</ul>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;summary&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Team Meeting&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Weekly sync-up&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;start_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-20T14:00:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;end_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-20T15:00:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;location&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Conference Room A&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;attendees&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;team@example.com&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-delete-event">2. Delete Event<a href="#2-delete-event" class="hash-link" aria-label="Direct link to 2. Delete Event" title="Direct link to 2. Delete Event" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>calendar_delete_event</code></li>
<li class=""><strong>Description</strong>: Deletes a calendar event</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>calendar_id</code> (optional): Calendar ID (defaults to &quot;primary&quot;)</li>
<li class=""><code>event_id</code> (required): Event ID to delete</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="events-1">Events<a href="#events-1" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-new-event">1. New Event<a href="#1-new-event" class="hash-link" aria-label="Direct link to 1. New Event" title="Direct link to 1. New Event" translate="no">​</a></h5>
<ul>
<li class=""><strong>Event Key</strong>: <code>calendar_new_event</code></li>
<li class=""><strong>Description</strong>: Triggers when a new calendar event is created</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>calendar_id</code> (optional): Calendar ID to monitor</li>
</ul>
</li>
<li class=""><strong>Output</strong>:<!-- -->
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;event_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;abc123xyz&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;summary&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Team Meeting&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;description&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Weekly sync-up&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;start_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-20T14:00:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;end_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-20T15:00:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;location&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Conference Room A&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;creator&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;attendees&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;team@example.com&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;created_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-15T10:30:00Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-event-starting-soon">2. Event Starting Soon<a href="#2-event-starting-soon" class="hash-link" aria-label="Direct link to 2. Event Starting Soon" title="Direct link to 2. Event Starting Soon" translate="no">​</a></h5>
<ul>
<li class=""><strong>Event Key</strong>: <code>calendar_event_starting</code></li>
<li class=""><strong>Description</strong>: Triggers when an event is about to start</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>calendar_id</code> (optional): Calendar ID to monitor</li>
<li class=""><code>minutes_before</code> (optional): Minutes before event start (default: 15)</li>
</ul>
</li>
<li class=""><strong>Output</strong>: Similar to new event output</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="google-drive-services">Google Drive Services<a href="#google-drive-services" class="hash-link" aria-label="Direct link to Google Drive Services" title="Direct link to Google Drive Services" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="actions-2">Actions<a href="#actions-2" class="hash-link" aria-label="Direct link to Actions" title="Direct link to Actions" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-create-folder">1. Create Folder<a href="#1-create-folder" class="hash-link" aria-label="Direct link to 1. Create Folder" title="Direct link to 1. Create Folder" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>drive_create_folder</code></li>
<li class=""><strong>Description</strong>: Creates a new folder in Google Drive</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>name</code> (required): Folder name</li>
<li class=""><code>parent_id</code> (optional): Parent folder ID (defaults to root)</li>
</ul>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Project Files&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;parent_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;root&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-upload-file">2. Upload File<a href="#2-upload-file" class="hash-link" aria-label="Direct link to 2. Upload File" title="Direct link to 2. Upload File" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>drive_upload_file</code></li>
<li class=""><strong>Description</strong>: Uploads a file to Google Drive</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>name</code> (required): File name</li>
<li class=""><code>content</code> (required): File content (Base64 encoded)</li>
<li class=""><code>mime_type</code> (required): MIME type</li>
<li class=""><code>parent_id</code> (optional): Parent folder ID</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-share-file">3. Share File<a href="#3-share-file" class="hash-link" aria-label="Direct link to 3. Share File" title="Direct link to 3. Share File" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>drive_share_file</code></li>
<li class=""><strong>Description</strong>: Shares a Drive file with specific users</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>file_id</code> (required): File ID to share</li>
<li class=""><code>email</code> (required): Email of user to share with</li>
<li class=""><code>role</code> (required): Permission role (&quot;reader&quot;, &quot;writer&quot;, &quot;commenter&quot;)</li>
</ul>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;file_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1abc2def3ghi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;email&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;colleague@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;role&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;writer&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="events-2">Events<a href="#events-2" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-new-file">1. New File<a href="#1-new-file" class="hash-link" aria-label="Direct link to 1. New File" title="Direct link to 1. New File" translate="no">​</a></h5>
<ul>
<li class=""><strong>Event Key</strong>: <code>drive_new_file</code></li>
<li class=""><strong>Description</strong>: Triggers when a new file is created</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>folder_id</code> (optional): Monitor specific folder</li>
<li class=""><code>mime_type</code> (optional): Filter by file type</li>
</ul>
</li>
<li class=""><strong>Output</strong>:<!-- -->
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;file_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1abc2def3ghi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Document.pdf&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;mime_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;application/pdf&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;created_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-15T10:30:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;modified_time&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-15T10:30:00Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;size&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">102400</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;owner&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;web_view_link&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://drive.google.com/file/d/1abc2def3ghi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
</ul>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-file-modified">2. File Modified<a href="#2-file-modified" class="hash-link" aria-label="Direct link to 2. File Modified" title="Direct link to 2. File Modified" translate="no">​</a></h5>
<ul>
<li class=""><strong>Event Key</strong>: <code>drive_file_modified</code></li>
<li class=""><strong>Description</strong>: Triggers when a file is modified</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>folder_id</code> (optional): Monitor specific folder</li>
<li class=""><code>file_id</code> (optional): Monitor specific file</li>
</ul>
</li>
<li class=""><strong>Output</strong>: Similar to new file output with modification details</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="google-sheets-services">Google Sheets Services<a href="#google-sheets-services" class="hash-link" aria-label="Direct link to Google Sheets Services" title="Direct link to Google Sheets Services" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="actions-3">Actions<a href="#actions-3" class="hash-link" aria-label="Direct link to Actions" title="Direct link to Actions" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-add-row">1. Add Row<a href="#1-add-row" class="hash-link" aria-label="Direct link to 1. Add Row" title="Direct link to 1. Add Row" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>sheets_add_row</code></li>
<li class=""><strong>Description</strong>: Appends a row to a Google Sheet</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>spreadsheet_id</code> (required): Spreadsheet ID</li>
<li class=""><code>sheet_name</code> (optional): Sheet name (defaults to first sheet)</li>
<li class=""><code>values</code> (required): Array of cell values</li>
</ul>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;spreadsheet_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1abc2def3ghi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sheet_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Sheet1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;values&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;John Doe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;john@example.com&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-15&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-update-cell">2. Update Cell<a href="#2-update-cell" class="hash-link" aria-label="Direct link to 2. Update Cell" title="Direct link to 2. Update Cell" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>sheets_update_cell</code></li>
<li class=""><strong>Description</strong>: Updates a specific cell value</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>spreadsheet_id</code> (required): Spreadsheet ID</li>
<li class=""><code>sheet_name</code> (optional): Sheet name</li>
<li class=""><code>cell</code> (required): Cell reference (e.g., &quot;A1&quot;)</li>
<li class=""><code>value</code> (required): New cell value</li>
</ul>
</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;spreadsheet_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1abc2def3ghi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sheet_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Sheet1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;cell&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;B5&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Updated Value&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-create-spreadsheet">3. Create Spreadsheet<a href="#3-create-spreadsheet" class="hash-link" aria-label="Direct link to 3. Create Spreadsheet" title="Direct link to 3. Create Spreadsheet" translate="no">​</a></h5>
<ul>
<li class=""><strong>Action Key</strong>: <code>sheets_create_spreadsheet</code></li>
<li class=""><strong>Description</strong>: Creates a new Google Spreadsheet</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>title</code> (required): Spreadsheet title</li>
<li class=""><code>sheet_names</code> (optional): Array of sheet names</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="events-3">Events<a href="#events-3" class="hash-link" aria-label="Direct link to Events" title="Direct link to Events" translate="no">​</a></h4>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-row-added">1. Row Added<a href="#1-row-added" class="hash-link" aria-label="Direct link to 1. Row Added" title="Direct link to 1. Row Added" translate="no">​</a></h5>
<ul>
<li class=""><strong>Event Key</strong>: <code>sheets_row_added</code></li>
<li class=""><strong>Description</strong>: Triggers when a new row is added to a sheet</li>
<li class=""><strong>Parameters</strong>:<!-- -->
<ul>
<li class=""><code>spreadsheet_id</code> (required): Spreadsheet ID to monitor</li>
<li class=""><code>sheet_name</code> (optional): Specific sheet to monitor</li>
</ul>
</li>
<li class=""><strong>Output</strong>:<!-- -->
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;spreadsheet_id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1abc2def3ghi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sheet_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Sheet1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;row_index&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">42</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;values&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Data1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Data2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Data3&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;added_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2024-01-15T10:30:00Z&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="api-integration">API Integration<a href="#api-integration" class="hash-link" aria-label="Direct link to API Integration" title="Direct link to API Integration" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="google-api-endpoints-used">Google API Endpoints Used<a href="#google-api-endpoints-used" class="hash-link" aria-label="Direct link to Google API Endpoints Used" title="Direct link to Google API Endpoints Used" translate="no">​</a></h3>
<table><thead><tr><th>Service</th><th>Purpose</th><th>Endpoint</th><th>Method</th></tr></thead><tbody><tr><td>OAuth</td><td>Get user info</td><td><code>/oauth2/v2/userinfo</code></td><td>GET</td></tr><tr><td>Gmail</td><td>List messages</td><td><code>/gmail/v1/users/me/messages</code></td><td>GET</td></tr><tr><td>Gmail</td><td>Get message</td><td><code>/gmail/v1/users/me/messages/{id}</code></td><td>GET</td></tr><tr><td>Gmail</td><td>Send message</td><td><code>/gmail/v1/users/me/messages/send</code></td><td>POST</td></tr><tr><td>Gmail</td><td>Modify message</td><td><code>/gmail/v1/users/me/messages/{id}/modify</code></td><td>POST</td></tr><tr><td>Calendar</td><td>List events</td><td><code>/calendar/v3/calendars/{calendarId}/events</code></td><td>GET</td></tr><tr><td>Calendar</td><td>Create event</td><td><code>/calendar/v3/calendars/{calendarId}/events</code></td><td>POST</td></tr><tr><td>Calendar</td><td>Delete event</td><td><code>/calendar/v3/calendars/{calendarId}/events/{eventId}</code></td><td>DELETE</td></tr><tr><td>Drive</td><td>List files</td><td><code>/drive/v3/files</code></td><td>GET</td></tr><tr><td>Drive</td><td>Create file</td><td><code>/drive/v3/files</code></td><td>POST</td></tr><tr><td>Drive</td><td>Create permission</td><td><code>/drive/v3/files/{fileId}/permissions</code></td><td>POST</td></tr><tr><td>Sheets</td><td>Get values</td><td><code>/sheets/v4/spreadsheets/{spreadsheetId}/values/{range}</code></td><td>GET</td></tr><tr><td>Sheets</td><td>Append values</td><td><code>/sheets/v4/spreadsheets/{spreadsheetId}/values/{range}:append</code></td><td>POST</td></tr><tr><td>Sheets</td><td>Update values</td><td><code>/sheets/v4/spreadsheets/{spreadsheetId}/values/{range}</code></td><td>PUT</td></tr><tr><td>Sheets</td><td>Create spreadsheet</td><td><code>/sheets/v4/spreadsheets</code></td><td>POST</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication" translate="no">​</a></h3>
<p>All Google API requests use Bearer token authentication:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Authorization: Bearer &lt;google-access-token&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="token-management-1">Token Management<a href="#token-management-1" class="hash-link" aria-label="Direct link to Token Management" title="Direct link to Token Management" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="token-storage">Token Storage<a href="#token-storage" class="hash-link" aria-label="Direct link to Token Storage" title="Direct link to Token Storage" translate="no">​</a></h3>
<ul>
<li class="">Access tokens and refresh tokens are encrypted using <code>TokenEncryptionService</code></li>
<li class="">Stored in <code>user_oauth_identities</code> table</li>
<li class="">Associated with user and provider key (&quot;google&quot;)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="token-retrieval">Token Retrieval<a href="#token-retrieval" class="hash-link" aria-label="Direct link to Token Retrieval" title="Direct link to Token Retrieval" translate="no">​</a></h3>
<p>The system supports two token sources:</p>
<ol>
<li class=""><strong>User OAuth Identity</strong>: Personal Google account</li>
<li class=""><strong>Service Account</strong>: Shared service account for actions</li>
</ol>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getGoogleToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">UUID</span><span class="token plain"> userId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Check service accounts first</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">Optional</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">String</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> serviceToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> serviceAccountService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAccessToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">userId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;google&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">serviceToken</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isPresent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> serviceToken</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Fall back to user&#x27;s OAuth identity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Returns decrypted token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="token-metadata">Token Metadata<a href="#token-metadata" class="hash-link" aria-label="Direct link to Token Metadata" title="Direct link to Token Metadata" translate="no">​</a></h3>
<p>Stored in <code>token_meta</code> JSONB field:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;John Doe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;given_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;John&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;family_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Doe&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;picture&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://lh3.googleusercontent.com/...&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;locale&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;en&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;verified_email&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="monitoring--metrics">Monitoring &amp; Metrics<a href="#monitoring--metrics" class="hash-link" aria-label="Direct link to Monitoring &amp; Metrics" title="Direct link to Monitoring &amp; Metrics" translate="no">​</a></h2>
<p>The Google provider exposes Prometheus metrics:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="oauth-metrics">OAuth Metrics<a href="#oauth-metrics" class="hash-link" aria-label="Direct link to OAuth Metrics" title="Direct link to OAuth Metrics" translate="no">​</a></h3>
<ul>
<li class=""><code>google_oauth_login_success_total</code>: Successful login count</li>
<li class=""><code>google_oauth_login_failure_total</code>: Failed login count</li>
<li class=""><code>google_authenticate_calls_total</code>: Total authentication attempts</li>
<li class=""><code>google_token_exchange_calls_total</code>: Token exchange attempts</li>
<li class=""><code>google_token_exchange_failures_total</code>: Token exchange failures</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="action-metrics">Action Metrics<a href="#action-metrics" class="hash-link" aria-label="Direct link to Action Metrics" title="Direct link to Action Metrics" translate="no">​</a></h3>
<ul>
<li class=""><code>google_actions_executed_total</code>: Total actions executed</li>
<li class=""><code>google_actions_failed_total</code>: Failed action executions</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="event-polling-metrics">Event Polling Metrics<a href="#event-polling-metrics" class="hash-link" aria-label="Direct link to Event Polling Metrics" title="Direct link to Event Polling Metrics" translate="no">​</a></h3>
<ul>
<li class=""><code>google_event_polling_cycles_total</code>: Total polling cycles</li>
<li class=""><code>google_events_found_total</code>: Total events detected</li>
<li class=""><code>google_event_polling_failures_total</code>: Polling failures</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="database-schema">Database Schema<a href="#database-schema" class="hash-link" aria-label="Direct link to Database Schema" title="Direct link to Database Schema" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="user_oauth_identities-table">user_oauth_identities Table<a href="#user_oauth_identities-table" class="hash-link" aria-label="Direct link to user_oauth_identities Table" title="Direct link to user_oauth_identities Table" translate="no">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id: UUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user_id: UUID</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  provider: </span><span class="token string" style="color:#e3116c">&quot;google&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  provider_user_id: </span><span class="token string" style="color:#e3116c">&quot;123456789012345678901&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  access_token_enc: </span><span class="token string" style="color:#e3116c">&quot;encrypted_access_token&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  refresh_token_enc: </span><span class="token string" style="color:#e3116c">&quot;encrypted_refresh_token&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  token_meta: JSONB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expires_at: </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Access token expiration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  created_at: </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  updated_at: </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-handling">Error Handling<a href="#error-handling" class="hash-link" aria-label="Direct link to Error Handling" title="Direct link to Error Handling" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-errors">Common Errors<a href="#common-errors" class="hash-link" aria-label="Direct link to Common Errors" title="Direct link to Common Errors" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>Missing Token</strong></p>
<ul>
<li class="">Occurs when user hasn&#x27;t connected Google account</li>
<li class="">Returns: <code>RuntimeException(&quot;No Google token found for user: {userId}&quot;)</code></li>
</ul>
</li>
<li class="">
<p><strong>Token Expired</strong></p>
<ul>
<li class="">Access token expired (after ~1 hour)</li>
<li class="">Should automatically refresh using refresh token</li>
<li class="">Re-authentication required if refresh token is invalid</li>
</ul>
</li>
<li class="">
<p><strong>Insufficient Permissions</strong></p>
<ul>
<li class="">Occurs when required OAuth scopes not granted</li>
<li class="">HTTP 403 from Google API</li>
<li class="">User must re-authorize with additional scopes</li>
</ul>
</li>
<li class="">
<p><strong>Rate Limiting</strong></p>
<ul>
<li class="">Google API quotas vary by service</li>
<li class="">Gmail: 250 quota units/user/second</li>
<li class="">Calendar: 500 quota units/user/100 seconds</li>
<li class="">Drive: 1,000 quota units/user/100 seconds</li>
<li class="">Should implement exponential backoff</li>
</ul>
</li>
<li class="">
<p><strong>Invalid Request</strong></p>
<ul>
<li class="">Malformed parameters or missing required fields</li>
<li class="">HTTP 400 from Google API</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="event-polling-strategy">Event Polling Strategy<a href="#event-polling-strategy" class="hash-link" aria-label="Direct link to Event Polling Strategy" title="Direct link to Event Polling Strategy" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="polling-configuration">Polling Configuration<a href="#polling-configuration" class="hash-link" aria-label="Direct link to Polling Configuration" title="Direct link to Polling Configuration" translate="no">​</a></h3>
<ul>
<li class=""><strong>Default Interval</strong>: 300 seconds (5 minutes)</li>
<li class=""><strong>Fixed Rate</strong>: 10 seconds (scheduler interval)</li>
<li class=""><strong>Activation Mode</strong>: POLL type must be enabled</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="polling-process">Polling Process<a href="#polling-process" class="hash-link" aria-label="Direct link to Polling Process" title="Direct link to Polling Process" translate="no">​</a></h3>
<ol>
<li class="">Service retrieves all active Google action instances</li>
<li class="">For each instance:<!-- -->
<ul>
<li class="">Checks if polling interval has elapsed</li>
<li class="">Calculates last check time</li>
<li class="">Calls appropriate event checker</li>
<li class="">Triggers executions for new events</li>
</ul>
</li>
<li class="">Updates last poll timestamp</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-optimization">Performance Optimization<a href="#performance-optimization" class="hash-link" aria-label="Direct link to Performance Optimization" title="Direct link to Performance Optimization" translate="no">​</a></h3>
<ul>
<li class="">Uses <code>ConcurrentHashMap</code> for last poll times</li>
<li class="">Transactional processing per action instance</li>
<li class="">Skips disabled instances early</li>
<li class="">Implements pagination for large result sets</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="security-considerations">Security Considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="token-encryption">Token Encryption<a href="#token-encryption" class="hash-link" aria-label="Direct link to Token Encryption" title="Direct link to Token Encryption" translate="no">​</a></h3>
<ul>
<li class="">All access tokens and refresh tokens encrypted at rest</li>
<li class="">Uses <code>TokenEncryptionService</code> with AES encryption</li>
<li class="">Encryption key stored securely in environment</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="scope-minimization">Scope Minimization<a href="#scope-minimization" class="hash-link" aria-label="Direct link to Scope Minimization" title="Direct link to Scope Minimization" translate="no">​</a></h3>
<ul>
<li class="">Requests only necessary scopes for implemented features</li>
<li class="">Additional scopes require code changes</li>
<li class="">Users can revoke access via Google Account settings</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="account-validation">Account Validation<a href="#account-validation" class="hash-link" aria-label="Direct link to Account Validation" title="Direct link to Account Validation" translate="no">​</a></h3>
<ul>
<li class="">Email verification required for authentication</li>
<li class="">Verified email status checked from Google</li>
<li class="">Duplicate account linking prevented</li>
<li class="">Existing OAuth identities checked before creation</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-privacy">Data Privacy<a href="#data-privacy" class="hash-link" aria-label="Direct link to Data Privacy" title="Direct link to Data Privacy" translate="no">​</a></h3>
<ul>
<li class="">Email content never stored permanently</li>
<li class="">Only metadata and IDs cached temporarily</li>
<li class="">Calendar event details accessed on-demand</li>
<li class="">Drive file content not stored in AREA database</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="integration-example">Integration Example<a href="#integration-example" class="hash-link" aria-label="Direct link to Integration Example" title="Direct link to Integration Example" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="frontend-oauth-initiation">Frontend OAuth Initiation<a href="#frontend-oauth-initiation" class="hash-link" aria-label="Direct link to Frontend OAuth Initiation" title="Direct link to Frontend OAuth Initiation" translate="no">​</a></h3>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> initiateOAuth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">provider</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  localStorage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setItem</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;oauth_provider&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toLowerCase</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> oauthUrl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">API_CONFIG</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">baseURL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/api/oauth/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">provider</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/authorize</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">location</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">href </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oauthUrl</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="backend-oauth-callback">Backend OAuth Callback<a href="#backend-oauth-callback" class="hash-link" aria-label="Direct link to Backend OAuth Callback" title="Direct link to Backend OAuth Callback" translate="no">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token annotation punctuation" style="color:#393A34">@GetMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/callback&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics operator" style="color:#393A34">?</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handleCallback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#393A34">@RequestParam</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;code&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> code</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">HttpServletResponse</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">OAuthLoginRequest</span><span class="token plain"> request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">OAuthLoginRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">code</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">AuthResponse</span><span class="token plain"> authResponse </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> oauthGoogleService</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">authenticate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">ResponseEntity</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ok</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">authResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="unit-tests-location">Unit Tests Location<a href="#unit-tests-location" class="hash-link" aria-label="Direct link to Unit Tests Location" title="Direct link to Unit Tests Location" translate="no">​</a></h3>
<ul>
<li class="">Test files should be created in <code>src/test/java/area/server/AREA_Back/service/GoogleActionServiceTest.java</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="test-coverage">Test Coverage<a href="#test-coverage" class="hash-link" aria-label="Direct link to Test Coverage" title="Direct link to Test Coverage" translate="no">​</a></h3>
<ul>
<li class="">Invalid action keys</li>
<li class="">Missing tokens</li>
<li class="">Token expiration and refresh</li>
<li class="">Event checking with various parameters</li>
<li class="">Error handling scenarios</li>
<li class="">API rate limiting scenarios</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="future-enhancements">Future Enhancements<a href="#future-enhancements" class="hash-link" aria-label="Direct link to Future Enhancements" title="Direct link to Future Enhancements" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="potential-features">Potential Features<a href="#potential-features" class="hash-link" aria-label="Direct link to Potential Features" title="Direct link to Potential Features" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="gmail">Gmail<a href="#gmail" class="hash-link" aria-label="Direct link to Gmail" title="Direct link to Gmail" translate="no">​</a></h4>
<ol>
<li class=""><strong>Search Messages</strong>: Advanced search with filters</li>
<li class=""><strong>Create Draft</strong>: Create draft emails</li>
<li class=""><strong>Manage Filters</strong>: Create and manage Gmail filters</li>
<li class=""><strong>Manage Labels</strong>: Create, update, delete labels</li>
<li class=""><strong>Attachments</strong>: Handle email attachments</li>
<li class=""><strong>HTML Emails</strong>: Support HTML email composition</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="calendar">Calendar<a href="#calendar" class="hash-link" aria-label="Direct link to Calendar" title="Direct link to Calendar" translate="no">​</a></h4>
<ol>
<li class=""><strong>Recurring Events</strong>: Support recurring event patterns</li>
<li class=""><strong>Event Reminders</strong>: Manage event reminders</li>
<li class=""><strong>Calendar Sharing</strong>: Share calendars with users</li>
<li class=""><strong>Free/Busy</strong>: Check availability</li>
<li class=""><strong>Time Zone Support</strong>: Better handling of time zones</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="drive">Drive<a href="#drive" class="hash-link" aria-label="Direct link to Drive" title="Direct link to Drive" translate="no">​</a></h4>
<ol>
<li class=""><strong>File Search</strong>: Advanced search capabilities</li>
<li class=""><strong>Folder Management</strong>: Move, rename, delete folders</li>
<li class=""><strong>File Versions</strong>: Access and manage file versions</li>
<li class=""><strong>Comments</strong>: Add and manage file comments</li>
<li class=""><strong>Export Formats</strong>: Export Google Docs/Sheets/Slides</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="sheets">Sheets<a href="#sheets" class="hash-link" aria-label="Direct link to Sheets" title="Direct link to Sheets" translate="no">​</a></h4>
<ol>
<li class=""><strong>Formulas</strong>: Support cell formulas</li>
<li class=""><strong>Formatting</strong>: Cell formatting and styles</li>
<li class=""><strong>Charts</strong>: Create and manage charts</li>
<li class=""><strong>Data Validation</strong>: Set cell validation rules</li>
<li class=""><strong>Batch Operations</strong>: Bulk cell updates</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="additional-services">Additional Services<a href="#additional-services" class="hash-link" aria-label="Direct link to Additional Services" title="Direct link to Additional Services" translate="no">​</a></h4>
<ol>
<li class=""><strong>Google Tasks</strong>: Task management integration</li>
<li class=""><strong>Google Keep</strong>: Notes integration</li>
<li class=""><strong>Google Contacts</strong>: Contact management</li>
<li class=""><strong>YouTube</strong>: Video management and monitoring</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-improvements">Performance Improvements<a href="#performance-improvements" class="hash-link" aria-label="Direct link to Performance Improvements" title="Direct link to Performance Improvements" translate="no">​</a></h3>
<ol>
<li class="">Implement webhook/push notifications where available</li>
<li class="">Cache frequently accessed data</li>
<li class="">Batch API requests where possible</li>
<li class="">Implement exponential backoff for rate limiting</li>
<li class="">Use partial responses to reduce payload size</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">​</a></h2>
<ul>
<li class=""><a href="https://developers.google.com/identity/protocols/oauth2" target="_blank" rel="noopener noreferrer" class="">Google OAuth 2.0 Documentation</a></li>
<li class=""><a href="https://developers.google.com/gmail/api/reference/rest" target="_blank" rel="noopener noreferrer" class="">Gmail API Reference</a></li>
<li class=""><a href="https://developers.google.com/calendar/api/v3/reference" target="_blank" rel="noopener noreferrer" class="">Google Calendar API Reference</a></li>
<li class=""><a href="https://developers.google.com/drive/api/v3/reference" target="_blank" rel="noopener noreferrer" class="">Google Drive API Reference</a></li>
<li class=""><a href="https://developers.google.com/sheets/api/reference/rest" target="_blank" rel="noopener noreferrer" class="">Google Sheets API Reference</a></li>
<li class=""><a href="https://developers.google.com/api-client-library" target="_blank" rel="noopener noreferrer" class="">Google API Client Libraries</a></li>
<li class=""><a href="https://docs.spring.io/spring-security/reference/servlet/oauth2/client/index.html" target="_blank" rel="noopener noreferrer" class="">Spring Security OAuth2 Client</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/SamTess/AREA_Back/tree/main/docusaurus/docs/providers/google.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/AREA_Back/docs/providers/github"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GitHub Provider - Technical Documentation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/AREA_Back/docs/providers/slack"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Slack Provider - Technical Documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a><ul><li><a href="#core-components" class="table-of-contents__link toc-highlight">Core Components</a></li></ul></li><li><a href="#oauth2-implementation" class="table-of-contents__link toc-highlight">OAuth2 Implementation</a><ul><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#oauth-scopes" class="table-of-contents__link toc-highlight">OAuth Scopes</a></li><li><a href="#oauth-flow" class="table-of-contents__link toc-highlight">OAuth Flow</a></li><li><a href="#token-management" class="table-of-contents__link toc-highlight">Token Management</a></li><li><a href="#account-linking" class="table-of-contents__link toc-highlight">Account Linking</a></li></ul></li><li><a href="#implemented-services" class="table-of-contents__link toc-highlight">Implemented Services</a><ul><li><a href="#gmail-services" class="table-of-contents__link toc-highlight">Gmail Services</a></li><li><a href="#google-calendar-services" class="table-of-contents__link toc-highlight">Google Calendar Services</a></li><li><a href="#google-drive-services" class="table-of-contents__link toc-highlight">Google Drive Services</a></li><li><a href="#google-sheets-services" class="table-of-contents__link toc-highlight">Google Sheets Services</a></li></ul></li><li><a href="#api-integration" class="table-of-contents__link toc-highlight">API Integration</a><ul><li><a href="#google-api-endpoints-used" class="table-of-contents__link toc-highlight">Google API Endpoints Used</a></li><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a></li></ul></li><li><a href="#token-management-1" class="table-of-contents__link toc-highlight">Token Management</a><ul><li><a href="#token-storage" class="table-of-contents__link toc-highlight">Token Storage</a></li><li><a href="#token-retrieval" class="table-of-contents__link toc-highlight">Token Retrieval</a></li><li><a href="#token-metadata" class="table-of-contents__link toc-highlight">Token Metadata</a></li></ul></li><li><a href="#monitoring--metrics" class="table-of-contents__link toc-highlight">Monitoring &amp; Metrics</a><ul><li><a href="#oauth-metrics" class="table-of-contents__link toc-highlight">OAuth Metrics</a></li><li><a href="#action-metrics" class="table-of-contents__link toc-highlight">Action Metrics</a></li><li><a href="#event-polling-metrics" class="table-of-contents__link toc-highlight">Event Polling Metrics</a></li></ul></li><li><a href="#database-schema" class="table-of-contents__link toc-highlight">Database Schema</a><ul><li><a href="#user_oauth_identities-table" class="table-of-contents__link toc-highlight">user_oauth_identities Table</a></li></ul></li><li><a href="#error-handling" class="table-of-contents__link toc-highlight">Error Handling</a><ul><li><a href="#common-errors" class="table-of-contents__link toc-highlight">Common Errors</a></li></ul></li><li><a href="#event-polling-strategy" class="table-of-contents__link toc-highlight">Event Polling Strategy</a><ul><li><a href="#polling-configuration" class="table-of-contents__link toc-highlight">Polling Configuration</a></li><li><a href="#polling-process" class="table-of-contents__link toc-highlight">Polling Process</a></li><li><a href="#performance-optimization" class="table-of-contents__link toc-highlight">Performance Optimization</a></li></ul></li><li><a href="#security-considerations" class="table-of-contents__link toc-highlight">Security Considerations</a><ul><li><a href="#token-encryption" class="table-of-contents__link toc-highlight">Token Encryption</a></li><li><a href="#scope-minimization" class="table-of-contents__link toc-highlight">Scope Minimization</a></li><li><a href="#account-validation" class="table-of-contents__link toc-highlight">Account Validation</a></li><li><a href="#data-privacy" class="table-of-contents__link toc-highlight">Data Privacy</a></li></ul></li><li><a href="#integration-example" class="table-of-contents__link toc-highlight">Integration Example</a><ul><li><a href="#frontend-oauth-initiation" class="table-of-contents__link toc-highlight">Frontend OAuth Initiation</a></li><li><a href="#backend-oauth-callback" class="table-of-contents__link toc-highlight">Backend OAuth Callback</a></li></ul></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a><ul><li><a href="#unit-tests-location" class="table-of-contents__link toc-highlight">Unit Tests Location</a></li><li><a href="#test-coverage" class="table-of-contents__link toc-highlight">Test Coverage</a></li></ul></li><li><a href="#future-enhancements" class="table-of-contents__link toc-highlight">Future Enhancements</a><ul><li><a href="#potential-features" class="table-of-contents__link toc-highlight">Potential Features</a></li><li><a href="#performance-improvements" class="table-of-contents__link toc-highlight">Performance Improvements</a></li></ul></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/AREA_Back/docs">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/AREA_Back/docs/category/guides">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/AREA_Back/docs/category/technical-documentation">Technical Docs</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://localhost:8080/swagger-ui.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">REST API (Swagger)<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/AREA_Back/doxygen/html/index.html">API Reference (Doxygen)</a></li><li class="footer__item"><a href="https://github.com/SamTess/AREA_Back" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Integrations</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/AREA_Back/docs/category/service-providers">Service Providers</a></li><li class="footer__item"><a class="footer__link-item" href="/AREA_Back/docs/category/worker-system">Worker System</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 AREA Project. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>